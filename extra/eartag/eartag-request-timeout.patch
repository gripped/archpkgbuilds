From c3c85851b4ae6d85c2f4142bd91a3b0b8e4c1a35 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ball=C3=B3=20Gy=C3=B6rgy?= <ballogyor@gmail.com>
Date: Fri, 25 Oct 2024 20:55:34 +0200
Subject: [PATCH] musicbrainz: Set timeout for requests

Without this, a request could hang the application infinitely.
---
 src/musicbrainz.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/musicbrainz.py b/src/musicbrainz.py
index a1dcec2..e8a5cc5 100644
--- a/src/musicbrainz.py
+++ b/src/musicbrainz.py
@@ -53,7 +53,7 @@ def make_request(url, raw=False, _recursion=0):
     headers = {"User-Agent": USER_AGENT}
     try:
         request = urllib.request.Request(url, headers=headers)
-        with urllib.request.urlopen(request) as data_raw:
+        with urllib.request.urlopen(request, timeout=30) as data_raw:
             if raw:
                 data = data_raw.read()
             else:
-- 
GitLab


# Maintainer: Jelle van der Waa <jelle@archlinux.org>

pkgname=python-camel-converter
pkgver=5.0.0
pkgrel=2
pkgdesc='Converts a string from snake case to camel case or camel case to snake case'
arch=(any)
license=('MIT')
url='https://github.com/sanders41/camel-converter'
depends=(python)
makedepends=(python-build python-installer python-wheel python-hatchling)
checkdepends=(python-pytest python-pydantic)
optdepends=('python-pydantic: provides a base class to automatically convert between snake and camel case')
source=(${pkgname}-${pkgver}.tar.gz::https://github.com/sanders41/camel-converter/archive/refs/tags/v${pkgver}.tar.gz)
sha512sums=('0f02ed633a426e2a28168967fab34a56ed635195424b4d382d53c2cfb0e57f3adc508e2a3d5c0df101eba33b168bfdf0d13546e50e78d3bb1c72a52b009abc98')

build() {
  cd "camel-converter-${pkgver}"
  python -m build --wheel --no-isolation
}

check() {
  cd "camel-converter-${pkgver}"
  pytest -o addopts='' tests
}

package() {
  cd "camel-converter-${pkgver}"
  python -m installer --destdir="$pkgdir" dist/*.whl

  install -D -m644 LICENSE "$pkgdir/usr/share/licenses/${pkgname}/LICENSE"
}

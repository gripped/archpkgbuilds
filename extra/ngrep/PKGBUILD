# Maintainer: Lukas Fleischer <lfleischer@archlinux.org>
# Contributor: Eric Belanger <eric@archlinux.org>
# Contributor: dorphell <dorphell@archlinux.org>

pkgname=ngrep
pkgver=1.48.3
pkgrel=1
pkgdesc='A grep-like utility that allows you to search for network packets on an interface.'
arch=('x86_64')
url='https://github.com/jpr5/ngrep/'
license=('custom')
depends=('libpcap>=1.0.0' 'pcre2')
makedepends=('git')
source=("git+https://github.com/jpr5/ngrep#tag=v${pkgver}")
md5sums=('bf2031ade9d17f2cb411f288c88dfa7a')
sha256sums=('5d744d8b743143291815b8c666f60c7c3a7d782c365fd80d1fca951bbc2525d7')

build() {
	cd "${srcdir}/${pkgname}"

	./configure --prefix=/usr --enable-ipv6 --enable-pcre2 --disable-pcap-restart
	make
}

package() {
	cd "${srcdir}/${pkgname}"

	make DESTDIR="${pkgdir}" install
	install -Dm0644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=passt
pkgver=2023_12_04.b86afe3
pkgrel=1
pkgdesc="Plug A Simple Socket Transport"
arch=(x86_64)
url="https://passt.top/passt/about/"
license=(
  BSD-3-Clause
  GPL-2.0-or-later
)
depends=(glibc)
optdepends=(
  'sh: for demo script'
)
source=(https://passt.top/$pkgname/snapshot/$pkgname-$pkgver.tar.zst)
sha512sums=('59cda9b58530d0d823d12f40782e2df03fb0b9d37ce7b836b15eba53515a3c973060ce1328decbd28b7ab13bd0143fae0587c0284155e5e977a63cb06a6d547c')
b2sums=('db4417a153d9cdafb8fd405561ad1f4885137f708f3350e7c868c7c6d835a8ec80de4c39ca3975a6008c3622a7d90e9c9428f63bded181b1fd05bced1d4590d9')

build() {
  make -C $pkgname-$pkgver
}

package() {
  make DESTDIR="$pkgdir/" prefix=/usr install -C $pkgname-$pkgver
  install -vDm 644 $pkgname-$pkgver/LICENSES/* -t "$pkgdir/usr/share/licenses/$pkgname/"
}

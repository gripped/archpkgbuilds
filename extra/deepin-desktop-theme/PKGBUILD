# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgname=deepin-desktop-theme
pkgver=1.1.12
pkgrel=1
pkgdesc='Theme resources for Deepin desktop environment'
arch=('any')
url="https://github.com/linuxdeepin/deepin-desktop-theme"
license=('CC-BY-4.0')
makedepends=('git' 'cmake' 'ninja')
optdepends=('adobe-source-han-sans-otc-fonts: theme standard font')
groups=('deepin')
source=("git+https://github.com/linuxdeepin/deepin-desktop-theme.git#tag=$pkgver")
sha512sums=('fa99df01beab487039648c06e8585c86a74cd8b4247c2b2206d04c3dc0e807b0e2d5fa5eac52aa12d0384caab3a4e6a7cf8b30667a046b2d71cc8fb4cd68153a')

prepare() {
  cd deepin-desktop-theme
  # remove the tool, suggested by upstream
  sed -i '/xdgicon2dci/d' tools/CMakeLists.txt
}

build() {
  cd deepin-desktop-theme
  cmake . -GNinja -DCMAKE_INSTALL_PREFIX=/usr
  ninja
}

package() {
  cd deepin-desktop-theme
  DESTDIR="$pkgdir" ninja install
}

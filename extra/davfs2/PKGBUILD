# Maintainer: Caleb Maclennan <caleb@alerque.com>

pkgname=davfs2
pkgver=1.7.2
pkgrel=3
pkgdesc="File system driver that allows you to mount a WebDAV folder"
arch=(armv7h aarch64 x86_64)
url="https://github.com/alisarctl/$pkgname"
license=(GPL-3.0-only)
depends=(neon
         po4a)
backup=("etc/$pkgname/$pkgname.conf"
        "etc/$pkgname/secrets")
_archive="$pkgname-$pkgver"
source=("$url/releases/download/rel-${pkgver//./-}/$_archive.tar.gz"{,.sig})
sha256sums=('1bdc2bb235a9f2e546a6a13c559ecf43c64407e3c4497d77b8ec3f62f4b84e46'
            'SKIP')
validpgpkeys=('51A0F4A0C8CFC98F842EA9A8B94556F81C85D0D5') # Ali Abdallah <aabdallah@suse.com>

build() {
	cd "$_archive"
	autoreconf -vfi
}

build() {
	cd "$_archive"
	./configure dav_user=nobody dav_group=network --prefix=/usr --sbindir=/usr/bin --sysconfdir=/etc --disable-debug
	make
}

package() {
	cd "$_archive"
	make DESTDIR="$pkgdir" install
}

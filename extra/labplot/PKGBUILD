# Maintainer: Antonio Rojas <arojas@archlinux.org>

pkgname=labplot
pkgver=2.12.1
pkgrel=2
arch=(x86_64)
pkgdesc='KDE Application for interactive graphing and analysis of scientific data'
url='https://labplot.kde.org/'
license=(GPL-2.0-or-later)
depends=(cantor
         cblas
         cfitsio
         discount
         fftw
         gcc-libs
         glibc
         gsl
         hdf5
         karchive
         kcolorscheme
         kcompletion
         kconfig
         kconfigwidgets
         kcoreaddons
         kcrash
         ki18n
         kiconthemes
         kio
         kparts
         ktextwidgets
         kuserfeedback
         kwidgetsaddons
         kxmlgui
         libcerf
         libixion
         libmatio
         liborcus
         liborigin
         lz4
         netcdf
         poppler-qt6
         purpose
         qt-advanced-docking-system
         qt6-base
         qt6-mqtt
         qt6-serialport
         qt6-svg
         qxlsx
         readstat
         syntax-highlighting
         vector-blf
         zlib
         zstd)
makedepends=(boost
             dbc-parser-cpp
             eigen
             extra-cmake-modules
             kdoctools
             knewstuff)
source=(https://download.kde.org/stable/$pkgname/$pkgname-$pkgver.tar.xz)
sha256sums=('e28155bfddf40e5b6f7c4791313556d1e48138044f216f210d515b9f6d6c106a')

build() {
  cmake -B build -S $pkgname-$pkgver \
    -DENABLE_TESTS=OFF \
    -DLOCAL_DBC_PARSER=OFF \
    -DLOCAL_VECTOR_BLF=OFF
  cmake --build build
}

package(){
  DESTDIR="$pkgdir" cmake --install build
}

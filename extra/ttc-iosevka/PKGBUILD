# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=27.3.1
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('1eaa2cfc5ca748406ed336753eaf62fbc01584b4eddfc9314a472225a8d8bd65b19ae734c7f5d5187dce8a299f50362c802679c659cfa9560a59ab9431b58be0'
        '1b2fb1f673b1c01953639098e13445a37234faef79c5642dd96bd0113b78e609cc20d2b68873a90a2aae82b86ff6e5f4bc6a86d8906282edf9a83f7d33bf4de3'
        '1c6dbea8c8f1656502d241e004d77ba973a3e66270487f621fd15a065b3fdd2bceae0a764e20d7bb90bc592b005e0a1428c887097f301b35130640c5ac13109c'
        'c378fd98839c70046fedd4c2533f555825f48282c0d9154dd4debf18896668282da2b6d6f05c28a90322decaf187f320a551c836b7efa6ebf4397cf0633307eb'
        'd7c354a816fb9012cfbcd2907606898b12a908d0b87cb451ca294388df951252c9988c6462ed5f4941213ed5e698e102939b0c9e5b0c8c56086da83307269b10'
        '53725dd57bc4350d8a02e1c62f0048c4c0be3c0ce787a151d0764babdff077daa12447c877d511e7ca3a4488b2b7592cc243012665015e7c8f9e16b8ffded99c'
        'a02a718bf70121eda3e5a7f0218d26e438ede54a6789d2866d220be6d0961546944f1d1fedf50d6ada0377a8797477b6e6dc1c3f4677fa824e882e7d7375ef98'
        'a1293976989ae99012c4b57e5ce9cc5415608216d10870c1266720379666ab4d20b0b29ce092328b477ab126dcbeff242f57f2a1ecf38c6f4d3954e5b20c5b6e'
        '151762fb77d08ac05148845742077bd0f4551db1c4d1bb15119556b7475cdeb1bb96a0485b94733e45186c3f58c708c0f5a4a8a4d57f8cb8506d8ab72ce02cd5'
        '6d99a8602226bf2a0c660a16092e5965ed51192978c4bd5e9aaa221c93393ab760903d40a57dbc64b6fd3a20c6fcba3513b5bd3f55b3c4af98e1cfcf60cf6f0a'
        '8711e0cf358eaef832f616770e4bd72a897765539d1a31759a0f7864031c88e46b584ff67d54a1b08481b288254d239a5ee6ee68a60d17106f9c7619d9895c10'
        '51e23104eea0582b6119c53077eeb2c2d1c5a3c16d2ebe5edc08df889dd5c4e3c77eccdce100af83f01c1c11a2afafa23dccc7b679148d317ed2353bfc4e3586'
        'a7722dc92a9beb40c48dc6561a645cb5ff17d8ebd8d86c37f65354e5079dcdaf9a36dfcbbf5edbe7810666e7524af4f9afd61fdc1d30d58b1dfc344aaa84097b'
        '755e8ff68869e500b5539cf0a634fd92d6c147935c8e8447d68b351d393c09871974265b872bec084cdaa16dd4a634176a324c7e9f15560b3c9c0d19b2f60fc9'
        'e167f02989839738a342d696b3f1a043f37f6b5d1bfd4f5f4ccc17c861cf3016f60c2e25af804ae354de683238bae17052b0e5f114e47030ddd5732dc5aa82ea'
        '305231e377c23f4e3326ff726d08711907fa38772435ae4caffa4d7fc51ffddeffd4af9cbc7ae62a5b556a120d14d2ba8252b29ac64827f6e328a0271c9f0aa2'
        'dd1c8c01b8801c2435bcf55cc291818f2c20b3931de37da550c6d3d96b1ef92d317ac31fa72997c4e5f2e7b69979acddbfbd4af6690e9766c6d92dbdcc2242d3'
        '6ef2f13ff23a9e620f75b753b03139bd52c8141145edb82c30b03ffd60ac6a0068debbe39f507c6700de10ab639814a8e1b67a44db7e08523ba003a4b274c5ae'
        '1b7de409a348d2e5bedc029abf093a2f5eea074337a3eb3b0d9c2d043b3c8d54f41a9670983c8f0585343455f1168ad8b2dd91219af20e0bb35439bc4afc4f27'
        '4a4e162c3931020380c5f9b96bc85c9c501f663830c1ed544b25039f9d996b57f63151ebb6e133f3c431820183ff68752a578aeacf9c51db15168d27d29e1498'
        '02c93737de52450e5b21e97488d952dfbb5131ed20bf5e26446f6678383a67bb34595492dada417d272ff3689e64b66258a2322f082d6f08cfc97021d7aa0d06'
        'f35fe49cd6267840a1743404959937ed6b67fb3b215a5dc5de0799da569d9aa6a099567d5eba46e8723386330d2656c51f6afb7e98fa320ec0da804ad7fa57ca'
        '5ad1aea49d6c18da758d1f256c0d7067818a79c0f39fc60b0be11e4bccc9aa5cfa6dec01f1b691e57711c2d891d764071b12709dc1f6e5b2ba2b01df94d209f2'
        '9e5125299307d9dfbd34a4bc1ce83f48a77e0fbfc1d1ddc984f5c1e3aedca258119fbbdc88529239653f9bd094a4c96b34fd832e5d86ae136c40eded15aa40e5'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

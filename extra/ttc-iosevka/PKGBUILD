# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=27.3.4
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('759bffdf16298877a1b2fa827d76ee614c1bca935fb04da367d2fa125c065a43399667edc83f90c2358863b02e007f62549c9dc9dc292061489b7935a7845627'
        '105fe6b63f19edb4774a97f030169ec88caad5e1c925b6dd7de53146aad841e2d783305bc1f05a4e128081df5298f336d546e4ffe23ae53fb4f73fe0b81d201d'
        'fed6960c5effb2d4288970d196c066211d97c40d36da1abd01370c9bfe7af213fd8751bee1b5ad948f8b803355648bcdfe46cc21ef137909e7cd0ec0d92ba447'
        '509db45fe2e062a7bd8513f8bbd25e8056cd49b47ce1ab06dccb50960f78d647f4ab118a1edb430b468c971a78c7f5c8f7626458c20fb6fd761e51ae9f8c6bfa'
        'd0c289f31f497ecea58137084291e708e010324e22622eca0ce7a1e1f0ab3f43c298b57eef0f201bb38697455ffa340a82cc81f88f9e838c39012f8c86cabacb'
        'afef1ecdffba7fd1682ae25e6f2431ecc82456d0f4181b1bb5dd7faffc191070e0537ecbc0b6009b553d10aa21655d2522cacfdca553e732288ce05b8116e8f9'
        '8391e1a2bd3dc1b62425f2ed9dd96ef107484b41144fada803ae54684d8f771a8f0abab33c6e6e1912621383f55b824dc73591daa1db675aa0eb6c0a0134f078'
        '15aa27c6806fa6c3fd3c07562b7e2bb180d324853a1e3867af668c6fa7fd3d2f7148a59bcc9db27847ef6851ac21c1f876c50d59f5685d8f35aeb6ae29ba580f'
        'e4c0f90d1676ddf00deb73168fca0d81a22700c4de346ae5e9984dfa303821ae6c9433b15342d3a3ab2382c65c5b17ed5388c73a7154ff2c51d4c425cfbcb9ca'
        'e3ebc2f23503c796f9874f3ff14f56a2312a737a3e28ca28c67182a994928f6879bed7ae62893f5676bea148124fe30873714249de59d3630d46417b25bc8e4a'
        'fbf7597f0da769d29870e0c15a40f1763c72401a11f58dfb800d235fae0c0b8b4c7b955de4187269d78d814356a0047d7e64ce1eccb15e4e396977e1b8a4bb26'
        '8a6e403db6059e051ccc11f668b1dc94a460a30a8e4cdec732e1ea1763b13b94e5fe6e05ef94e42333cc16ed8c98e8a4b263b263cbad3a408275f30642095923'
        '67601092d6f5a7003cf1fb005eb2abefe2a88048f1f7c117a0f0d56d4fd66dcf62286ffa8a686c151158d2d2abe410490b1597a3da3f26f0a3769ec0fb81488a'
        'a572a2025787b7c5a82386526f66218fddb711a2cbe67ad198e206dbe585532a587dc005ea45fab3487e256345b959583968b455257332f4630fcab7f821183c'
        'c9dbbbd0827a68195c0ba368fe670f7290e7d427f1d0aa3d982cf3e1e680dc9f3c1acb9a1c67b80d0b809d4a98157fd2e4af75ee4f338439f0a3e900f7865124'
        '5614674a6247d2d0f2aa00678a44e888d983566a8f22d7a8b7e5d44c207d82fd3c413063c0b21967672c779b61caaa8f78c21b082f3f0ecde12331b8a7c5f11e'
        '9d9a2c96586261d9ff6cca9a49bbf4b4cc506c479919732a842563d73d28ad5cd5f77eb9738e5352ffd68cbb9d70ad4eba3773979495b7c2f382504fdf17259f'
        '50e09884bcc5124fbcf00e3d0bf9a85d6a922162f022508bc940638c6023b263c7f335a538b032120270c8893765ba8483cf26b39864741f8fe6be119e49f1ee'
        '73b4d251460347a73c72e29cbe47d837f642e61e9d6c7556c704beaa085cf8b94442f1b4bd8cc79112683c423d94defd5d8d44957c2f85f7944835d0dd956dc8'
        'a1b8e9218518c19522a97a35f68037fd6c1acf5155e3bfdc7a503c638496beda3ffd30d2e83019745f721da32f6c6943b186f454db75a5f979c6dd1b46e1479b'
        '8634f94c52325f1f1d03248b4c0840fd39001e151c76f6bbba68b1e90f2c38f6c9a047dc59392115d3b4a1ea080811172570d8a6faa1ba2dcebe72f153cc1a4a'
        '6028583be0c5eebdd69327f4d82f1da48d21a51f34342a5fc8222fd6f65653dd138de4fff19d72b90c8d52eb44ff3bbd1b8c82132586244e0c3f862e20ef12db'
        'e5cc4c0af605e9efef2e5b42295d47e14d2aac016955b5ac9daf6873ea5f2ffa203b8cd3c0992c5a1578f79c25fa6093a9a6b54ebf118b9e5e816ca6c3123831'
        'd523bc2bde66d9697225fb5abbed645827eb1473a1f0e0b706ec84958576f6ef0080c847ec6e03c7b9b77ed396e46faaa6bec3826f8075c7c76c15be29d1b484'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=27.0.1
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('f6f538f9df937efe53f94552aa655952deac9b8118f6ad542e3704c737383e38c7c6a3084e920756b80ee754a7b23e7e08ed9d4486a1b1ba7b882763bac06445'
        'd7bd630e1377cd6d735105326c30bd7cd76233cb9208e2583473a1e3f432a087e0465214e1fddb32da576c01b1bddce7ca2481123d76651793244923047a0ad1'
        'd2bbba38c7d58ce51d49a2fb43a398a0dfd27dd0b9b2493603e4115c13df7e047809e02a61e22108b18cf0d876c55b540483229bf464095788f3a2dd5d0911be'
        'dc8cd9bb1944aec0ad3da088991be5b124ac43dbb42c7480abdca2e0eb22be8a40c9fa5283a4fa08055a70cfc395b2ed3249cdee1e7c906cafbe595e4a0e0101'
        '92d6b6b0e563fee94d8600884b85fcb5f00f1ee85d757b80c27b62da29afd60b2d1223d9a99f0ad4fc71834a8bfec3ae5e5450fe67e948670cd4e20fb188032e'
        'e4b777a5b2c4475f48953c090b08f59397722750da0aed513811cb4655e8cc6f5df235403f48a09555602c0b9f59650fd834c6201e2dc3bdc5f36c8115e89d43'
        'bdea18a770b7e595229ba562a98252731961c72e76f824bb2d5d6649a30338357410ccb0478b75d1111ee2a9981a577c278cd66a8eb514e189079a6f8ca44ec5'
        'db750cdaab71056e9cfbb95202cc6dfbcd50da98a3d22a9eb280071589f94eb0f8ce9621475aebd50b424688a8486d0aedd78e3df32af0461a7940a036f63767'
        '8e9586edd2bffb56bef18e4be15b33945020d7ba71bc3319721cf290f3d8f12630573c448daec3df053567c1d13ff71583d44dffec6faac45068e74a918e9495'
        '66830822a6570713ec897f2094a3be9b4edbd6e5c14801abf3a107b08ef1944ef9b304e5a23052f5c82f6fe86037ee4992b0214114c34ebc7a79b78260a45779'
        '9d6b7baab4ff2616230ee7d226040da45619ed7e916b7d7df5fe1c3655c5ef4027a6946fb056f30dab69355f967dfbc78719ab6f4015f60cc97ec1c83c01d90a'
        '3ccd33f92a9493691eb6be6b17a9a5b6a5d68ba0706d1d92f383b97eb05556efae14c29005a233bbe9b664559603d22209c89291cd51a0ed7de4bc013f961d0a'
        'b4fabf0cd2ee7af6110f2107e6fad8da36a60dd8e3292f673cbfecf013dacbc6b62f7165c620e732c002b818cdde36036d89f1f48833c7958b620a2c98511d20'
        'b2f3cb2f0357ff4b74aabe6672ecf39edb026bbb426cfa6699d86c89a0bfa52e45aa33bffb2bd3d9a3e56c60fb48f8200df74b3221453a6bda2f71891da97ee3'
        '9970168d028252e5df26f256288ab12214c82627609b64aae1e378660060a95fba60b47221f87b299efe92e0bdfb2cf62e350b44f3040701eb1eafef1f016d3e'
        '28cf0bdb6542a4366b02d1e7d8a841f2af32a346f7486c8ad1037c6ab560c0f3dbab2449f2f6ef3d62aef03c3dbc602fd019e4255cc4e084c98c90cd4023f788'
        '060a5a1282a5364fd54f444575fa80df308c7cc9aa61bf4132f814e670f4a456847596165355488a769150b1f638ccf71b83b353024ffa5aa7da0e4f05761dbe'
        '3d9df3d0aef7278e8a6d9d665f4d050a4d2972163586e1bfe1b2fc1f79daad6cfaf987603bf4aa1ca33ca126777526f3650e17e264b9585cc88c1514b7233821'
        '8339346c9e548f2215d0b8c49862cf54d6a150604ffcb67eb40f472f621071c070f45177b8a552810814d4a9dae158df060a598d57d6935ce42327f65a4ceb9b'
        '73f44e4b2f717f2ff849ff86c8c6d59531ffbc6fa4704fd4d6d33a780a64bc704379532e80cd6bfc1ff611991d1ac0416e8a159080cc95e56bd27553afa141c3'
        '72ed4b4f19eb10a218035214ba949d87f5b632affaa5133fdab1914979d8c677a1a78536b84beb23aa1a3e098f52b050f98df44598d46b0112ad42ec9a1e57db'
        '55404621fccabcd33cbf1c76148aae002b58aae6b9b37f64829bd2bec95dd7928b418e899b81eb63f00e6a717ae7625a8e6e68a341efe504c13a0776c2b7dc7c'
        'bb2d6c62165d7ed8243d5454c7686313420f7a16f522cd9e326ebb92364b333c68b78100620af3d59455128e41f93ea688fc6d643dbddcf5daad4575b210aa66'
        '389bf1275f7d645e14e46a368f68686fbc3a4aed34a4fbaef8e0800736dceb16cdac7ad7f134c3a052183748e4064a38530c8d0623c6dd84197d6d460c422f62'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

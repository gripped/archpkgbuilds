# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=30.0.1
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-Iosevka-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaAile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaCurly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaCurlySlab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaEtoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSlab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('9bd4f19c57723eb8360df2e945dec5e025b3537e3510ae3a31b6c1c72282937f9ecc38899c1faa4f27ab81320a6b11d14d1b07efc8f2737e8afa5473fa012515'
        '96a2543dba7499a4ebd76c5d40132f4808f50b4071aea362a769d1cccd88d4a851735be27def05a2593d6a2c7e785f3e3521b1b9551f556718425169c55374b9'
        '566a38b1252107b085fa127e5c658592d986163dda1940365ffca092fe63a9cec821bd8652b567189efd858700791522c635895cad53724d8fb809caf2fa22d2'
        '12fcd1c35dffcde214f9e8fb644e7bf2c14f82a4b180f66f6a0842d6a090694c5ba1c0072cd22a2358930a3b9eaf810f2a31300b2ac44aeea7b79a47e19c7c4f'
        '2face9773b6ee9e84ea5b6a4efeeac078027cc7d571e5d1cc225864503cc6e628023c6b1e5e4dbec7742557879d3cfb5d9a8f459e795c3a4e931848244ac8f77'
        'f714a07ca0928cb4d2c27c7b57c9c023d16f63735459f50ae02e6156e527913954084c7540df86ad61e88d6dc03bb162b1fbf243b4c98b9ecb7cf444d3897aca'
        '6b7bd7d7b5b028f72d7891e824f3793cc9de59a89e8a7cfd82b90d95457e4b0c7e2532a873ceb8b1703b8ced729b8f4cf393f18bb4fc40ad5179695362669f13'
        '86543a7bbd668f9fc728553223123396c747472c8fdb573d6184bd22c1a543d2179cffd8cac7b832235b9927271131d73a96600254567caf3175c42c6dafe4ab'
        'af927cb93147b12c15cf90d433ac790885718edecf866f38889bffeca4f89bd79b43dba002818f572b73b145d8db01ece98bab02054895802ad68c8dfc9089a9'
        '0828cc3b894ebd3e0e46b98df8df7b05443009d4b41557f8b5414fe6cad0f1b9301e2af2edd3d931f7564ad6f28e1f76844b17a3330af0cd7a5c2507d29bb83d'
        'd8b34985fd069e138335a46ab5c5a6516258d9840998558b836199458e5eba282fd96afdf851d801743cbbbfadbd310f0b6efe2cf7732204aac3128fa12f8b52'
        '796bf0bf8244fd9ae4b81a1963cdb54578a11333ee62aafa70cdcbb68ec5d43bcb49cd207e668aa4c749910afdbed04417d2fc40995bd3840600496bbb970350'
        '01b7993804bd406cb516d53bdd74163cd64a47ed1c9bb28bebf36c7e925d870c02800535056445fa48d2ecfe64380ecff08d9b17a1ac56b96e75fc450593b478'
        '639e870deccd11d56ed9b9142e27480cf6ac5c51f262a7e92cca6e53b75519ea167fab18023164beab2e6a292de3ec233541723a0bd6b94a5211645918592e20'
        '8785b560279dbc7f4243cad03530587264a12974deaa7c96073af7d5ab0f05dabdf0fd4b48dc1f6c42daa9d5e93cf3bdcc1ae2ebc900c1a08b59c5cef74baad3'
        '84469c517a21941f414836c45fd37aba35bb178645f1ad2e655415e83b1bd4261966375ab12559dd7fedc68ea4cc5782e647148ec451083995fe4c64974f6e1a'
        '12ed028d68a2df98f9ccf544105f805669dae6c94bb0b193c3202a59a494fe413817bf1148ee38f498389116afccc3d6f9691e8404585b8b21e023fc5af04216'
        'e0268163b66a12978593f83a9081e50d289f838879455f875f88d065f5aae7d79bb3e60e2250adce6dd4cb619f94d018f060c3e3e3902ca78a511c0500e274ba'
        '173d5f018666b9cf9bf3cc3fbcb1615805e9dab39f65b65cff2dda6a4eb7e47cd9aaa53adad94a72bb4460f0cd5838f32d6df1d1a218def53dba819538fff058'
        '163fed94fcc1485b57de382146fa405c01845e74e063d2b5f28648ca9ebb77400623a98e72adc86da448cd7572c674811019c33f43a1afc4378cf13daa1e12a0'
        '5aed9b549e85c036a32bdbd35c1a55e68f14cd4bac7c18422ef1affebc8299cc2c646f2520d41ec5574f2bfee5ed28034313a74d16de8fe49633dd9f527a365b'
        '8ff761abc1350c0072b8eb50b1317518d3cfccf0c95bbbfcaff8150e8b335827390718977cae59bda286dbb3db20ff922838126348a23f3eea7c45ba17314c33'
        'c61ae1c29e7d99bae4f921997a7c4d2d7d815228093c0277875c9782443cb0f2384186465f3c3056620d498275ea3fad31b3744cbc80adef53fdcc53e2539881'
        'bde9e7f64e408902a657aa324973b268c5424fff1fe45cfbb535f1d58c63ff323381cfac1bba3f89626326b52434c0915932ee7d77f9a4585b5a0111adf4e1af'
        '5797eb038afec94575f5cf54ab2ceb5f1e08f74308b20eceb22548790c61d8bac857ee796fab9b1a283d8482026bd641ab5dc359c8df5a9fb334562b729a6d63')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    fontname=$(echo $fontname | sed -e 's|iosevka|Iosevka|' -e 's|-aile|Aile|' -e 's|-curly|Curly|' -e 's|-slab|Slab|' -e 's|-etoile|Etoile|' -e 's|-ss|SS|')
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" != "${pkgbase}" ]]; then
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

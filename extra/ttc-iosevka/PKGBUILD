# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=27.0.2
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('566755f8c8033cd76e3b3ac2f863510326149357d64a634400bac835e613147d1585542b7b418d2b3bf5cd806d06ce1cc2a407511c5e239a3364aba673ad521f'
        'c8a7b73d62e6cd841f868c8274b971fa327912e87b18abdc1ba9ffec409b243094e1f5df4795f45d5b797039d13cd5d0d653c9aa4389a880362b1b01f915998b'
        '29ee4dcff7102ed16a1821fb8c97a9ca8cd75d7a1c99a61c331fa6c264803eb0940dced7be3ad656c538c8838981db9619b6ae23d536e36f9005f6d37ff072e8'
        'c7a0090daee51ee943fd339f99be79a324cb5624c6cfd06c13a68af7da4230645a14842c3ae40f8af7c4c5917dd62ab394af1ff58d46fb421364f60236de12c0'
        'b62ac680371d9c5539651432c61213336c10842ad03b0b0b348760b0fc020959757898b9c46d0df8da2b7b24dc7e926855c9008e9bbdad0dc02410ea9624afae'
        '356d2de522404e8adef045b250f791830dd251103d0435e9342203b08afd307c8d500136984c47546f090d27979e2ec382d0ea7380cd534b223cf66ec749491f'
        '41dd7e2dcf43bfd522acb9335a097a35a745de97e24f96e46c7d4aec671f3a8b339d7f3c11bf98e5c392b88d8ef505616ac46a4906fffca43cec16fa043dddbd'
        '357d9051581de6d4a12569db6c1e5ad76e16ac4a00a1ccc50cd985bd647542634b46cdacfb70a43c64aef761e5061ab13faf7c0f1866418cb5e91377b6dc1231'
        '3f7dca0e8355c50625be36d6102b87dc919dbc26244e987d135866dca5ae304a5675e5a6630dc62a12f13b9b97ac98cd57c88290b7ffa196d4fafde8d5b16660'
        'b9b0647d0c68894fbdf8e1d187985db29db62b99cf8dc4b7913aebc13ff28dba6fec7beceb4ca022e9db5be28cc768eb92b9224b285da2f2e12e34b6dd9d1b43'
        'f925400dc97f58706c2f117c129759b2ef8055dd59e39a72ac2ba1686231c59150f346505ed0a23037f9f107b0f107d529139f7e18af3043b4b0ed8dc6b7a1ae'
        'a758d1c04a784d6b13edec938abe9d25c1d40195da12b03133c85e9ffa6b0115e481aa2631dd2b26c9c3e2f354c136652bc7251d3d436f8a0c80dd1580e3609b'
        'cc167ae0ec4ed46190a1ececbd8538eeaa9eb75b1ae1215ddba908a0b9a7a914aa4e28f99cea8b611d0bfdc5124c1b8f3959f490f01991bcf0ddd7e6e17c76df'
        '774a91e7a2bd91214fe51deb79d8f0905ef3e876ff72b32857342f8932d8f0c19b1a60a833d434df48462aca2c7a57b85e3a6d52ae3673e7231c78dc2bcf3af2'
        '29f8a98253a34323e1c3dc0ca0b595e0b5e5c06b37777c222ad3adb68e7943856c0b65436585ead93e154f5bdcc8b4d15c071e828d4eeda296493747f8ba497d'
        '2d47afc3d30a65b4f46c7a8cc9277c8b1d35e18a19be1135f8606dc1a5a684bf70e18d828d2990b3a5ebae07a71970d981dd8dfa153c5c094a3a018b5b42061b'
        '1aa3700ea9708e68d612b64508380df6d6065f17b56ff79b924ba47bbfd487cc5f9c85d172c07f0a17af4116ba413d821ff5ba300a1d7f39b584ab245bda051b'
        '608971e33f80b8718fb15545e37636c7cd328c7066834ed458bbbe1a6df9dda46547986e55058d93774cc40acbc9c464e48617f15a41b760c52054a9460a2556'
        'f8d2c51f370c88eff503766da8681651453bd1890a96357a4fdd755d5dde458a040962a7d127c576f8212894430b5c595cc1cf5a75f9321a13f045d3d0ee8348'
        'cebfd3a4af463dfdfeab46e1e3845e1152d0e1f62e9ba631db3e049e92d38f3572c22b8bd347ff513bbe64c296e4f4aacc2a39f52a6409263d7f50c1fdcc8c17'
        '0a5f132b4fbaa3f4e27e6e95515cd79f24cd646ac8e54a2f41a2853dd57174d773bc3a274c5e0647aad7f6cefef067b2e96f13dbf32243eb95d8414221ccc429'
        'd6cb8edd06a0abde68e86975906cc8909f4b29aaa05c2261303cafb5724e13361c47a5c552763ad77bee7c719de7538ce7d36a3adecce315f705e8768d8ae018'
        '43c02574e291d405aefa0287360bdaf6cff2984649a4bcf849f71876fa1cd948f8386738567afe038d22f69c55777afcb5b34f21014463389e207ab6912c85c8'
        '9b826d3d36d12d31854b58bcaf8c128615de55255fe3b7c5b61e23dca59c4639ef22b31ef4684a03bbfbf37e2d619ff40b2029de34ce523fc931ad57852b3052'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

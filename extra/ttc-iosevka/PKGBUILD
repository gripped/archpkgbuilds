# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=27.2.1
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('4eda62dd56f0d9c57161d040f775124d2662cdb529a901d21de9b4a2d714e6e6853cf8d10bbf711d804fe983830eb0288bcd4ea037652cd7cd9fcfdef299d56c'
        '3c1d84b49f3ecdccbe6f6d08efcbf71dfb83e04db11275a62ff251908df1593bebb3ce37ecd8dc72b8077532a2575916b3adef6445b95f06640130dd4be6da10'
        '0304e3c47e778b18a2c09fdd5ef8af8847b13998fc677c95848f61b4d89e49403f179b19e9fb65b3fbe2fda369e8e5eb0a1a01c7c13072d1bb578a82def5ea2e'
        '7c982f2b18c83fcee1629ddceddcf8dec3180b374bc2a96808a84d84ec9b7c1c48806d39a8490250dd0af17898579b1d17c6187fcfe1a94e72ca9ef7dfa61433'
        'b8e0e7c7796b23c0a1f91b6813ec8ecc6a04b30f91ebaec73513c3d107b5cc34e53c4ebb888df8754e59052d5a09982aeaf9ba436d989e99311f0f10d5b89a2f'
        '93045caf70d9de494d0457fd7852fba17d58f45d730d0a53b4f8f217746938c1ab1dfc8fce3ce59da79cf1ae3aa6f929a6b5f932738151e3753a24ce7d5443b2'
        'de1a0dbcb7cb193941581b318c5983b9da05c404a2753c94c8db7757c330a12c092965fa2b19e1d6a14fe03d33be224b9ff6027e92a2bc8b1bb43bd0030894e8'
        '223ba219b81c59567364cc7c01a89f303be61dc3147a23991e6c5f1b8d50bd9353c72f219be58f57c99dcfee4a33c7d1b85c7ad65da11cba88656da21318b901'
        'eee5d488a135d64a9b8c86f851d424d72acc7744e70bfeaa37a743c224fc041b892acfe38b3a30a53cdd4b7b32fded488bc3383b4e270e871bddafcf931ecf8c'
        '547735ce7cacab623348c3855c3e4db8f1b37fb6952f3da118717583b0bc1db7293e9122f531f98ecc250b6852e6320c1f81d226d7cc12f8e14a1fd1ba3180b3'
        'f5160d81281214d60d6ea5583b5a16c86bb792530a2a03eb1c683659dccfc2ea807c3e4cc57bd53b9c56c61d8059a2a981c4402bab8cf319aeeb7e77c44a9003'
        'c04415b5850d524bf95284a42a534f055d406bf91de400703c0903ab7e0cec7d035195ce553f40d0cb6a738df4a9077d44cbf4187793be6f6928a43ec550eaee'
        '8cf7a905574943251b9bd7bcb4629fce50fe8fd0c8fb063a567a3f744639da28e131aea35b6a521e8c95df84ef97831d0e3cc787e94502044d27d88c271e33a9'
        '74a5c115047ec7f8c3fc4146780ea229f94ba6019550bec6d51b8209f9f481d10d855c02d03ca46bacf8e55e4dc835f9fc1c3ff20783fbe6980778b2b145e7bd'
        '99e86004a898b0fec1243a450e34afd7c65713f704a17417106dc47380bc9be32102ee5fd738e977cc2941fe1d314f80301f6db02d7036c789c459286e6c13f2'
        'd1e2e425096e7ef78673942c80b8cd899b7446709f035d75763580d306552cb66d1152f38ab13e88579a856f197e5de701c1a10c4987c7f10304dc5c9d7803ac'
        '38162858e3bb4dde7b14569af5cb29613623c90caab45925af8866d0e5dd19be2bdba85b0e7ccffc28a026a1f443e0c9f3f86ebe68ee8e2547945c4eac379f19'
        'e3064dfac6184575211e7d2998393873368a70e6c7c83c85feaccb89d3abb4d36c575c057b0a8b8805be0f5831dfea904f485f4d56a255d3bb4244329275e82a'
        '5ea8166d6f75a7301692209911064af7ef0ac86916f2eb286ba3ca08f8bf5184ff983ebe0ef6be462ffbde50e6527b296abfcf3ac6b53b46f5d41a18257cda9c'
        'b8a1c6878054f9c3724847d01e4167e0de0252b056389350db735aab7ae08d33eab385c370e744b0d9345cd29750eac4fb1016d35f10f748a77f2ef07bc2500b'
        '469e00b7aeb30277fd1a542e7eb682e12451249503e0040c9fc4442d59cb8c238c16ce6b2da8b6e3ae3124242a35dbcdfd90995daccf406b8b94836465becd44'
        '729bfb2e4ae29176e73ea8bbc328ae98ebb22b7f0267e2b7067ff81f0cdc73da90de1bd99973e0a1823ccef80a2c53ba125a09a44331ae04d178cf64aef1a547'
        '85969c5769c41d47d79672e3a6f193b993c3b54de219f8c3e33471c242da11fc495ed3dfd21fc697e24bcde9cb51fe153fbbdd0b3c8de41d2c38eb2848b37a47'
        'd94cb7cef771555b7dd94173d041001d016e36be6f98fa24667fa56a3193514575aea7e6f0f87a5f019b6dbcc03009ff072f750b9b25125cf7ab031d257774df'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=30.1.2
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-Iosevka-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaAile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaCurly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaCurlySlab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaEtoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSlab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('af90bd50565dd1859d012fa87aa2fece30ade36a16937d01a4e8a881753004a5af076892aa4276884143eca40bc238e413fc5103549135994ca4429d98433107'
        '320406065d9e538b9aecc7378f7c5e2d67e8986a5137ba02aff3b47272b61c115c708408b29b7f7faadeda423108a9933cfb0c419f30d5874befa218ad60af95'
        '0ec370a35cfcdf2f5fec0a31d7ca5e9db6b1bec1de3d29c5d5e8903d54e37355226b3a8d226da393651935c8e3602b68b180e05665a0bfb27b7ecc641b762fa3'
        '47dcb4337b58dd42084b15d76eb96aa7c8fb87b909b0132a9465e257cfe9749952964cb9fdfc651ddd94ed7dd40e581af8ec1b80ef066daef75f9ea8a6b507eb'
        'd7a16af70d0db8b045fc9f4b416e1917986a32c70d06faa26b39fb332b265af5fd7ce6d7d3fd7f14d0d4eebd4eedab9a43868ce9a87469b6bfb2d4a15364e28f'
        '6456386884a90119dee3f9dcd5ab3f075bdcf910ce8eec35399dab55ac0e50577da95b0c01af7751e5f9601782b53c0057b3484440289e4f39022a192d886663'
        '5f7827d132dba19562cab2637a50a526c62a9c26457a36f79409179ef21b506e7ca3a8fab588659d8f67796a7d65867ae5f8f97f83c777113e28c3971257864b'
        '3f13a1be3f67c3d6b069f617aeb6c873425f69f15d48394e26c4cd119b9406b6dda393a93d2ce71446b87ee2d5c3ece82d045c95e796d59c901a37d4afd65eb3'
        '7062ac8f90a72199fa13a67581a09f0a547598409b2a4d4ef5f137b2e55efefb84fc5b8f323b6cf7b0fb292e84d9f8f8246fafee9204d4ee94bf857f0f7e68ea'
        '5c4b83e86002703f9138d86676fdae741baef766fc852f24dff42588007acf7d0b53709b09ed8914a7cb5704e57a9ac9b7f6a926d2d318f2f2d76e42c48eff7e'
        '8220d41fde6ae04b3b32c7e02febe77f9a6375273620bc9152bf3d7e36337454b933c1e91bde3ccf06cd7c5a3109a8a48863760545c7c5d3601c33243f2ffd7e'
        'dcaf6e5f05a069cb8673f4daccf850754316b8b4115faeb109000b7ec375e646c99f265c3f7b6d6c1a587518523475763c10bab2006834cd8e2da7cbfea08fc8'
        '9e445499dca6436daa39a9f296909ea4e5b7374e06c090ec9a7158f380508d0409b5b4ebc14b27de5702d895fafc3ea39d27e260911ff2648c6457e69e94c421'
        '84bee7e0466d430ba8a7a72b85c43e30b43ee8666a0d202baa0d405931b1fc69bc0494366c8313790e0d9db07b90a1a5d8a2a6d7d80fcb5bada9ff5295149329'
        '2ff5adcd65b66197cfb29ff32f6ac4eb7e8a0cb81fe1c932fe58715942053e0b15d45d4d6c8d5a2104cfc70c511d25f5fa1e1374add38df40e0c4f1c6c95d6dd'
        'e85e8e5992c2e870c637e27bc4cc9787646e2d777ce7d6d7e4a36a7711bc07e78f9bb4b636497bb3bebc01b72b03a9dc3e873f1787b0d500d76ca3f3eaba53a9'
        '81977fff8154366f09c196bcdaa3d6402087d923310d0e670474032855bd83beb344ec31c818d8db9672c3920a98a8710ecd29904bdd5691a965c0bc2d02062d'
        'eee812e48c86966b72f21247169a93510b615bf4c6764adaa69d1eb382947a07a05f0ce679b0421773d9bf0a67b07dace451170a47a14951f91255df1cc02111'
        '26314f05893c7ef5c6c9abb4a4e8629a04094b8a8858544e65ca85308a3846c665b216ee5186792d69224c5f874bc42c7967334843d85b4b0924aada83131f52'
        '8f4456baac59d5ef98129038fad5208a57a212bb5af3a9dca63ec559bb863eb4acfc331b8fbe63c3437a2b0c8f5634b8fcbd018378198fc551dbcd516e71520d'
        '079503cba70112824614bc9cb13ed91c1c18a1f581ca2c37e767d360c10d15a62cce0541709df5e6f1649edc4fe00d56f22229a87c68c6a8514c0de03192cd09'
        'dbc492130097c357433e40838c92b276ad23d7a99df7d91e56b2c43d08d60ad5851f230e94416747ee3c24f0d38b8a84dc3e19501b15066153b0ad43a6e221f1'
        '54264d61bf2896e8de19aefb681419bec27fee85d196fb6d1b9c662060916235c9dbca43d79bd93657553688b7f09dac928005aad1c9dfa6ec5ecb1974532e30'
        '0a5982c83f36bfd2566211d651ae7a8548b57b7599ffae66e0ac5ba7bcd513e2b39d12369c16f3637a2f845444682b42b920b546a61e57ccbae3313693060be3'
        '5797eb038afec94575f5cf54ab2ceb5f1e08f74308b20eceb22548790c61d8bac857ee796fab9b1a283d8482026bd641ab5dc359c8df5a9fb334562b729a6d63')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    fontname=$(echo $fontname | sed -e 's|iosevka|Iosevka|' -e 's|-aile|Aile|' -e 's|-curly|Curly|' -e 's|-slab|Slab|' -e 's|-etoile|Etoile|' -e 's|-ss|SS|')
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" != "${pkgbase}" ]]; then
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

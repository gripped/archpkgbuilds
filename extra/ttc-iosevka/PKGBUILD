# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=27.3.3
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('6455c214ff8cc1fd88dbeb90b932cfa1f0342c69c604629cd8ee1cf2a6db0bdbdea57234a5dad691875dcde60fee7506e2e06a031850c8955a276dfe118c6fbc'
        '77bb4989ad12c641f05af94fbdb9b4b4490a475acebd64a167dcee824adbaae9a70efd5881cc6bd2f48a4d4c94d9a32ae1f91343a12c0cacca931dc9203332e5'
        'b1ee38726a3a696c545caee84374ffc01084f05e85fe26e71495ab85e3eb92e2926571dcff2f1538da3b43ab2e4534a87fd361cf58b163b804892e875496dc63'
        '0d74ddaacab8294d5f5ab91ea49c6d5ca83cd7c7c1f3b68b5ee37fb34b8885f996bb65f3009cd989655439d2c8002aaaf42271b9873417472c615a320797e5e9'
        '9c00d4c6dcf853db1c45c5a1ee659abb2cba9434b0d7995c7d587851e4522369bedb79114d5aeabb9c5731635683b11f34a3894f353bcb25df40f6fdf0ae6472'
        '3ed2d27ce4ecdbf4aa6707670b507ce477e5059b315b6b06c17a74319f299a0ee928e06e9bb46a5a772ecdf99c584ff0423b1285d605edcf02901863d2a3e1c3'
        '75252be9145b1982ce5b007b2da3849643105acb0614551083dff68cbf1db9d2fc044fce52e44068e3592dec4f54a8f84800a82ac08a48cdbb1e763554e645fe'
        'b5f9bb30c8698de3a6f7e58b933fcb2a4a82b54c9e8ec237768db114dbf90c8ef8c83912ef6930d60708c3b5f862d736a50c837b55ff78e9ee17df502e92d6f4'
        '7e8e31a00115dd37091b1590d3da647f23612f6e152d0d87db07f6ca4b517f0ab00d850b4550f3ce8093da6518153586c12fe508a519cbc0045da3a28eaa5f68'
        '9d21c405c1b9cf1e880cc1bcd5dae7dde9b6e24a6502005342cac433e1ef642ed436fab7b68fa74151efd648773979f31c817cbe7cc6d57fd5bbf658cdd26f87'
        'ce41a89aec43f614574bc1644bfbc278a58483df91a297df1fb80c1977e0f547c1ccebc9d1e0151aae3fbf17f1930741e78cb2532f576249e959044b83f691b5'
        '07f0e7434418910447e81ca5e900ccfe5921f04ecd9f5ea86f71f5865498d21234a80eedf52531df644073875f86ece4d811abeea3ba2a2a8cf7e76795cd9386'
        '4f56deaa5efb59b1faee76cd140d2766109f21d69cff206cbf758f313c16823463411510744ab441ff968b06ad8d8d86db27739432324f6af35b7194c4687af6'
        'a7018fc38c09c9c7a51fb923c7b6caa2295483d6b01b92b0456b8f80138868dd761c3e3bc14765f4884578123c858e72f37027f3162ff46fed414da7c35ce00c'
        'd5d83669dc4c1113394fa54c6dc1a4b71ae18d2ec221d33b105d5b3f2a777f5bc38f01b1b8b213a0746196faf3d0ef70aa69e30e0adf8c3a03e7d3c4bfa244c3'
        'd40c3b51ffec5aa36df6d32c9cd094545b42bbccf1a3474435985a686391bb095f25d13c6637949898cc68784f4d3ccfe8517972c0dbe636f4c1879db904f0bf'
        'dbf95af19607d50cb9b84168ae96a359f7af607bc0ce239fd78d051a5e12b26d78848a524ef3081f2b4505a0b78c60ac1498bac0f20553113f69411b65f1e70c'
        '785f83195c889ef53ad1291047ac38ffc15d743b66f760ca7e597efccb7dc5eb6a4d10cc28be6da48611a0e5ff7a4183e492ffa6d1c4c7b2075d03b2492d64c6'
        'fa01bbcaf01a1a0308b85fe1049b8877de432213e5f66cebe7cd8d31e0c4d8cbfcbd6db33802491c1f0817d8f2348ebee3f410bc80af6c9d8e80ba445a62cacc'
        '0fbc31de25be2b69bbc4f9c98822dd62d035fa2ea6d1daa2519563a91cd757256337c5001e24b0ffb586b57a711f6072a728fa8763fbb98525e7b79af2c6a2e0'
        '965f9e133cd54de03249c673cd103a19a751fa313794c42a36eb64b677e731a94ef790ae48aeaa1a06461ffbc87eee5b1dbc9a211685a856c29fb298b5f16b30'
        '0b0b11888c2f63a5d83a75de3961e49a467986f65b3db99196e02775389ca31da9c9e5d2d8cc223dc3232bfb6d9f6e71fcc8b6560c94aac38f7c401b2b3d4b76'
        '9ea7dd839446b5286ddab53946b0d2ec2d5a02e1acfa58e7ca83748376681aeabf3430c4b8b897940ef674e46b23c5ac8137f25dd973dd2e8579c4cfa55c41b7'
        'fbae806da00dc564bb3f151fc60b483f4cb5b0819672bc7bcc8a25e2f2178883ef9a3c556b48abff894ef92d88544e00054dd9bd85746e5c884a410e8f00c203'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=30.3.3
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-Iosevka-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaAile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaCurly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaCurlySlab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaEtoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSlab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/PkgTTC-IosevkaSS18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('f02a79fcc2c6f7828c9f6a4aed91cdfc18037777f1cf70a5af30d52534d1158e8011389451377cb871bc530df96aff4e453ffeee90b53bb427130a0c06edb6dc'
        '4cd73f6ece6d1eb41eb4c90bcdeca2eecd889be987b97b8ee386594ea742090e2ac956b3a265780d764cb5d094f3ef54154c72469b4f14a1f214b7f61dbacf4f'
        '5940ca67c8dfecfbd4e22990a2b8a6b5140b8e94240cd22d7ac4ee5044733c663fe4b15176d7e759da3105774420bf544bd214781fdf96a76acae2f7719984c1'
        'da6955d6713bff286b77becbfb4e92d69db78165e80009eb388cf8855a75f83b57d399951a6e7498e9e60e67e6723cfcce89634e1dda951234efd59dd92c9c0b'
        '8870ac51cb5ae178bd1788fb44a6b46bd07f779fb8aee99be5ec95524951bdb02290960a408e23a5d7984e25111c533504e4665277021895e20963b823afd3e8'
        'bd7a14354b2fc6199ba2d58fddc2a655f2b285c76ec00a981a130af953fc5e8aa0466d2459fcebf924939a5eb0aae2b62369a6b567ac9741b592b46212629f83'
        '255aca2330efb2fd89c3a4790bab986b37f6fe10b43c8bc3e448a03ee65956026d98e04aab8329a64a8a95d743be6d851c176400904168045a57e63ddcc8e91e'
        'b961e687540211fb8a3d999e556b3b012185ec3d3caa6270d2ca7bb7fdba32c52b376442fcc7e589ea155cbae94134bdae631b96ffcbb5dd36a9894bbbe98d45'
        '06cf867ebed57c57cf9287aca1122a32243aaa3dd3433d8f06ab6b11a062e7c040ed82d59b89465166e2913d98d03090a2df1e8444ea65f179b976fd6ac9a3d4'
        '9820e15c53f47396cd9f03575d23c3a6f13f61d51b4256d7d3b7bc5db76598b1ce2d4fb4cd8f81aebad06dbb3747d8b3f45b6228e17ff61ab76c2e0bcd10adfa'
        '99e59f1408c76f9e9600067c765c14005e44b402829e72d7b5535c6266e34a9c71eca7c1d4f065bee1c9245595dbff71b2aa43d082de36470025e74d491eb927'
        'b309b3f6050dfdba676cd066ec84ab2e6094bde51db2a6b00b824a93e76724d53d8ee3dc846300ea5469dd74aea28f4510b330403ff48d2967eb57564c998697'
        '1e1194711842ec7f4f8e05dc14ccc13e42e9996a93effa71985b07725e464d475a5e2b93a0b48799fe315aa8cf8d35720437dd15186b00bbc187ed9f9495607b'
        '07fc6bcfe5fbf69823be0a7adae872a45e0ece6ab1052809762efd04821c043d66f71b629c7d233c9263e97701418a200d19b138db581d5211a5ea595d66baac'
        '2733430e94c1f2ce8c770f20ee851f02754a782a79e225a2b9babfc809b5956f471a8e1f9efce64a4bf6b6ef5e353e8874d11f45a8930479aed89fac616b18c5'
        '6c86ae7923c0f583381f05678c1755650fbf9edf11fe96c9ebce2cde894bb1e5f5b4fc4688ce5da048f42b191b91468be0cd9b33b96015119f45a1893ec6ad08'
        'ed95c783b7a36328ce3c6958a06dc76449d002b208626013541becba1f5ea136a9fae8d2d71aca8396e4df5251081180e4232164c26454a18cbc516ed1e0de61'
        '9e91c4ab9c8980dc6ac3091a5d643b571af0e3f351a19d580c23739bf8209747a99b5c4733a2246e7fea1a0b23d0441c3c27a4f88dd1ea028cb6d26b05b9586a'
        '756c5780bc033c03d3d467a2f6d304716aeb71aa3241b7c3c6bfd0c3c77fae7498badba70b5977c785844eae55257510fdaef400fed1a2a36229617af5fc0c4b'
        '71dc294c1af9325b6533bf6328c6e893b41abfad0aa813c28e530eca218d134bdcd05bdfc9ea97c7e19bb078b47c10f6b03e06d0cbdbdf746b2f3a5f5d174136'
        'd3fb9290ee1ccad3b43944f862b355183b7cb2f266d1de162873b9f53ad56de6ee1bb85da94256d418d93818b6bd7497b3effefc67c9c7050086efb4672e3b65'
        '9e837afdf3668cd6b3cc52882aaeef53007282efba4b48d97a388c43f4cf7684b472a9a665465573a55eaee6589da507d9ed355f4b6673d4aa899e5321a714b0'
        '46daf8f1d8eb09cdb1e04cb275150f975adcc8728aa9c159cd4554b0f6412b2d76161769d7ba326e7cfc243d3310693c6a3b1a00458e563ddc3570af152237fa'
        '73287bc6574a6288dde41b86895b7e4c7d29eb6563b011f062ea6d1b6b990529c27950a9af276cc7159df957811f878bc7a04602a349a4f3cb887d1f606cd527'
        '5797eb038afec94575f5cf54ab2ceb5f1e08f74308b20eceb22548790c61d8bac857ee796fab9b1a283d8482026bd641ab5dc359c8df5a9fb334562b729a6d63')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    fontname=$(echo $fontname | sed -e 's|iosevka|Iosevka|' -e 's|-aile|Aile|' -e 's|-curly|Curly|' -e 's|-slab|Slab|' -e 's|-etoile|Etoile|' -e 's|-ss|SS|')
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" != "${pkgbase}" ]]; then
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done

# Maintainer: Jelle van der Waa <jelle@archlinux.org>
# Contributor: Joey Pabalinas <alyptik@protonmail.com>

pkgname=cepl
pkgver=29.0.0
pkgrel=1
pkgdesc='An interactive C (ISO/IEC 9899:2011) read–eval–print loop (REPL)'
url='https://github.com/alyptik/cepl'
arch=('x86_64')
license=('MIT')
depends=('gcc' 'readline' 'libelf')
makedepends=('git')
source=("git+https://github.com/alyptik/cepl.git#tag=v${pkgver}")
sha256sums=('179ae62e629a4d5cc7df2d330f55f123176f04721044fe3b049f4d0b5629ad32')
options=('zipman')

build() {
  cd "${pkgname}"
  make
}

package() {
  cd "${pkgname}"
  install -d "${pkgdir}/usr/share/zsh/site-functions"
  install -d "${pkgdir}/usr/share/man/man1"
  install -Dm644 _cepl "${pkgdir}/usr/share/zsh/site-functions/_cepl"
  install -D -m644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname/"

  make PREFIX="${pkgdir}/usr" install
}

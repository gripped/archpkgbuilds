# Maintainer: Konstantin Gizdov <arch at kge dot pw>

_pkgname='keras'
pkgname=("python-${_pkgname}")
pkgdesc='Deep Learning for humans'
url='https://keras.io/'
license=('Apache-2.0')
pkgver=3.11.1
pkgrel=1
arch=('any')
source=("https://files.pythonhosted.org/packages/source/${_pkgname::1}/${_pkgname//-/_}/${_pkgname//-/_}-$pkgver.tar.gz")
makedepends=('python-build' 'python-installer' 'python-setuptools' 'python-wheel')
depends=('absl-py' 'python' 'python-h5py' 'python-ml-dtypes' 'python-optree'
         'python-numpy' 'python-packaging' 'python-pandas' 'python-pillow'
         'python-pydot' 'python-rich' 'python-scipy' 'python-tensorflow'
         'tensorboard')
optdepends=('python-pytorch'
            'python-requests: for RemoteMonitor'
            'python-scikit-learn: wrappers for scikit-learn')
conflicts=('python-keras-applications' 'python-keras-preprocessing')
provides=('python-keras-applications' 'python-keras-preprocessing')
replaces=('python-keras-applications' 'python-keras-preprocessing')
b2sums=('1886fbda7f41b2e6ad46ce3eb1e1c7b4fe66823492a3c8715a8a1b08782b50f618fa2d203a7fd39d43e8fffe4aa7d1d8c8d54bceddc7e494067b14c4154b6c86')

build() {
  cd $_pkgname-$pkgver
  python -m build --wheel --no-isolation
}

package () {
  cd $_pkgname-$pkgver
  python -m installer --destdir="$pkgdir" dist/*.whl
}

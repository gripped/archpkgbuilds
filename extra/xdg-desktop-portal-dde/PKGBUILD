# Maintainer: Felix Yan <felixonmars@archlinux.org>

pkgname=xdg-desktop-portal-dde
pkgver=1.0.6
pkgrel=1
pkgdesc='A backend implementation for xdg-desktop-portal on Deepin desktop environment'
arch=('x86_64')
url="https://github.com/linuxdeepin/xdg-desktop-portal-dde"
license=('GPL3')
depends=('qt6-base' 'qt6-wayland' 'wayland' 'glibc' 'gcc-libs' 'xdg-desktop-portal')
makedepends=('git' 'cmake' 'ninja' 'wlr-protocols')
provides=(xdg-desktop-portal-impl)
groups=('deepin')
source=("git+https://github.com/linuxdeepin/xdg-desktop-portal-dde.git#tag=$pkgver")
sha512sums=('ff0972842f7d86f66d8a03537179a5198010eb1f5df3d3c573480e4076b148cfad6e7e331372dd68f93812bc4aca07882d2dbf114529ec0f44214745c8c5caea')

build() {
  cd xdg-desktop-portal-dde
  cmake . -GNinja -DCMAKE_INSTALL_LIBEXECDIR=lib
  ninja
}

package() {
  cd xdg-desktop-portal-dde
  DESTDIR="$pkgdir" ninja install
}

# Maintainer: Robin Candau <antiz@archlinux.org>
# Contributor: Iyán Méndez Veiga <me (at) iyanmv (dot) com>
# Contributor: Thomas Wucher <arch (at) thomaswucher (dot) de>

pkgname=stress-ng
pkgver=0.20.01
pkgrel=1
pkgdesc="Software to stress test a computer system in various selectable ways"
url="https://github.com/ColinIanKing/stress-ng"
arch=('x86_64')
license=('GPL-2.0-or-later')
depends=('acl' 'apparmor' 'gmp' 'judy' 'kmod' 'libbsd' 'libjpeg-turbo' 'lksctp-tools' 'mpfr' 'xxhash')
optdepends=('intel-ipsec-mb: support for IPsec tests'
	    'linux-headers: include some headers from the Arch kernel'
	    'linux-lts-headers: include some headers from the LTS kernel'
	    'linux-zen-headers: include some headers from the ZEN kernel'
	    'linux-hardened-headers: include some headers from the HARDENED kernel')
makedepends=('attr' 'eigen' 'keyutils' 'libaio' 'libcap' 'libgcrypt' 'libmd')
source=("${pkgname}-${pkgver}.tar.gz::${url}/archive/refs/tags/V${pkgver}.tar.gz")
b2sums=('e69fa5f26d4e42b5d48be1e57eb26c48c0440cea37ae9949bc08d33e538e6c16f76164ea032b12a15bc8dce64471f3bdc5dcaf691cf687396abafd20cd2e1ce2')

prepare() {
	cd "${pkgname}-${pkgver}"
	make clean
}

build() {
	cd "${pkgname}-${pkgver}"
	make
}

package() {
	cd "${pkgname}-${pkgver}"
	make DESTDIR="${pkgdir}" install
}

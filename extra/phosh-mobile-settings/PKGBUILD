# Maintainer: Dan Johansen <strit@archlinux.org>
# Contributor: Jelle van der Waa <jelle@archlinux.org
# Contributor: Thomas Booker <tw.booker@outlook.com>

pkgname=phosh-mobile-settings
pkgver=0.51.0
pkgrel=1
pkgdesc='A settings app for mobile specific things'
arch=(x86_64)
url='https://gitlab.gnome.org/World/Phosh/phosh-mobile-settings'
license=(GPL-3.0-or-later)
depends=(
  cellbroadcastd
  dconf
  feedbackd
  gcc-libs
  glib2
  glibc
  gnome-desktop-4
  gsound
  gtk4
  hicolor-icon-theme
  json-glib
  libadwaita
  libgmobile
  libportal
  libportal-gtk4
  libpulse
  libyaml
  lm_sensors
  pango
  phoc
  phosh
  wayland
)
makedepends=(
  git
  glib2-devel
  meson
  python-packaging
  wayland-protocols
)
source=(
  "git+https://gitlab.gnome.org/World/Phosh/phosh-mobile-settings.git?signed#tag=v$pkgver"
  git+https://gitlab.gnome.org/GNOME/libgnome-volume-control.git
)
b2sums=(
  ec63ce4b5942a459b68d4d69589c807d99761802a78769ada5da7f52cf550f94737535cbee14cdf83b8b0886b61ba08600af487b7bc0d37a4d046c1c47dc1a26
  SKIP
)
validpgpkeys=(0DB3932762F78E592F6522AFBB5A2C77584122D3) # Guido GÃ¼nther <guido@xcpu.ch>

prepare() {
  ln -s "$srcdir/libgnome-volume-control" "$pkgname/subprojects/gvc"
  meson subprojects checkout --sourcedir $pkgname
}

build() {
  arch-meson $pkgname build
  meson compile -C build
}

package() {
  meson install -C build --destdir "$pkgdir"
}

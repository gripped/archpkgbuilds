# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=pd-lua
pkgver=0.12.11
pkgrel=1
pkgdesc="LUA embedding for pd"
arch=(x86_64)
url="https://github.com/agraef/pd-lua"
license=(GPL-2.0-or-later)
groups=(
  pd-externals
  pro-audio
)
depends=(
  glibc
  lua
  pd
)
source=($pkgname-$pkgver.tar.gz::$url/archive/refs/tags/$pkgver.tar.gz)
sha512sums=('92d68d677175f83fe00d43b1ef679a14efb20c88d5133d45d992fe0ed6822866a4a1e2149ed5af650b825ccd8007f4bc40cbb824a45ff517c3a49c239f07959a')
b2sums=('109a722b7094bbdd446d4004e8c191f6e231086a0544574ba5849788f19e521f3c6d7cd3fb3f9af2a84399f0f2fd17889574752796a95b7d81aac92e23029fab')

build() {
  make LDFLAGS="$LDFLAGS" CFLAGS="$CFLAGS" -C $pkgname-$pkgver
}

package() {
  make DESTDIR="$pkgdir/" PDLIBDIR=/usr/lib/pd/extra prefix=/usr install -C $pkgname-$pkgver
  install -vDm 644 $pkgname-$pkgver/README -t "$pkgdir/usr/share/doc/$pkgname/"
}

# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=pd-lua
pkgver=0.12.22
pkgrel=1
pkgdesc="LUA embedding for pd"
arch=(x86_64)
url="https://github.com/agraef/pd-lua"
license=(GPL-2.0-or-later)
groups=(
  pd-externals
  pro-audio
)
depends=(
  glibc
  lua
  pd
)
source=($pkgname-$pkgver.tar.gz::$url/archive/refs/tags/$pkgver.tar.gz)
sha512sums=('fd2ca0b62be17134ce35b1c04318c733c3a1dc208b267d0f9cd4280f531c1ee2c14a04e05a48b7704d422ae4b0f56e1946682ab412bdeb6618f11fdb861e25e4')
b2sums=('23e0145f7c136cd61efb85cfca5d75ac1184895ee86d7ba9647eeef504aa5f13caf819bf1259a692bbaf8c17c2591cc751462a663a936c596037dabeff7b1a05')

build() {
  make LDFLAGS="$LDFLAGS" CFLAGS="$CFLAGS" -C $pkgname-$pkgver
}

package() {
  make DESTDIR="$pkgdir/" PDLIBDIR=/usr/lib/pd/extra prefix=/usr install -C $pkgname-$pkgver
  install -vDm 644 $pkgname-$pkgver/README -t "$pkgdir/usr/share/doc/$pkgname/"
}

# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=pd-lua
pkgver=0.12.14
pkgrel=1
pkgdesc="LUA embedding for pd"
arch=(x86_64)
url="https://github.com/agraef/pd-lua"
license=(GPL-2.0-or-later)
groups=(
  pd-externals
  pro-audio
)
depends=(
  glibc
  lua
  pd
)
source=($pkgname-$pkgver.tar.gz::$url/archive/refs/tags/$pkgver.tar.gz)
sha512sums=('9fed3535aa94a63b71f4e74b4f037c752cf930e59d472c53ba3d7ae8a5738a434d6dc4382598cb73a2d1410d1b95e277645106a464ed99a8552779a421284d61')
b2sums=('2c75d108192b343bb680ecc05fa081d16001ccf2478dfebcbfd3ccdf6ce2a0e486ca9eb954d374755292980e127f2ddd9fec1d27dc6f5b20aaa45e909d9643ac')

build() {
  make LDFLAGS="$LDFLAGS" CFLAGS="$CFLAGS" -C $pkgname-$pkgver
}

package() {
  make DESTDIR="$pkgdir/" PDLIBDIR=/usr/lib/pd/extra prefix=/usr install -C $pkgname-$pkgver
  install -vDm 644 $pkgname-$pkgver/README -t "$pkgdir/usr/share/doc/$pkgname/"
}

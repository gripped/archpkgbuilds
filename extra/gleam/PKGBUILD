# Maintainer: Alexander F. RÃ¸dseth <xyproto@archlinux.org>
# Contributor: Arnaud Berthomier <arnaud@cyprio.net>

pkgname=gleam
pkgver=1.13.0
pkgrel=2
pkgdesc='Friendly programming language for building type-safe and scalable systems'
arch=(x86_64)
url='https://github.com/gleam-lang/gleam'
license=(Apache-2.0)
depends=(erlang-core erlang-eunit)
makedepends=(cargo git rust)
optdepends=('rebar3: erlang dependency support'
            'erlang: standard erlang distribution')
provides=(gleam)
options=(!docs !libtool !staticlibs !lto)
source=("git+$url#tag=v$pkgver")
b2sums=('55676086e7e74ac578980e7889e4802d07db5ffe6ce775208d26eaa98761b252b34a9c7f24512483c724c89cfd4eb831cea373cbecac2dd26f76d2ef24bb5e76')

build() {
  cd $pkgname
  cargo build --release
}

package() {
  install -Dm755 $pkgname/target/release/gleam "$pkgdir/usr/bin/gleam"
}

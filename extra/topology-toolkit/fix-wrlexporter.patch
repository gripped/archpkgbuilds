From 6a7ed5024da5dc9fec8cada7dda476aa70870476 Mon Sep 17 00:00:00 2001
From: Mathieu Westphal <mathieu.westphal@kitware.com>
Date: Tue, 5 Aug 2025 13:40:33 +0200
Subject: [PATCH] ttkWRLExporter: Update for new vtkVRMLExporter API

---
 core/vtk/ttkWRLExporter/ttkWRLExporter.cpp | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)

diff --git a/core/vtk/ttkWRLExporter/ttkWRLExporter.cpp b/core/vtk/ttkWRLExporter/ttkWRLExporter.cpp
index 5c8af3cca4..85af05e312 100644
--- a/core/vtk/ttkWRLExporter/ttkWRLExporter.cpp
+++ b/core/vtk/ttkWRLExporter/ttkWRLExporter.cpp
@@ -22,6 +22,7 @@
 #include <vtkTransform.h>
 #include <vtkUnsignedCharArray.h>
 #include <vtkVRMLExporter.h>
+#include <vtkVersionMacros.h>
 
 // base code includes
 #include <Debug.h>
@@ -145,7 +146,12 @@ TTKWRLEXPORTER_EXPORT void vtkVRMLExporter::WriteAnActor(vtkActor *anActor,
     fprintf(fp, "            solid FALSE\n");
 
     if(!pointDataWritten) {
+
+#if VTK_VERSION_NUMBER >= VTK_VERSION_CHECK(9, 4, 20250513)
+      this->WritePointData(points, normals, tcoords, colors, false, fp);
+#else
       this->WritePointData(points, normals, tcoords, colors, fp);
+#endif
       pointDataWritten = 1;
     } else {
       fprintf(fp, "            coord  USE VTKcoordinates\n");
@@ -189,7 +195,13 @@ TTKWRLEXPORTER_EXPORT void vtkVRMLExporter::WriteAnActor(vtkActor *anActor,
     fprintf(fp, "          geometry IndexedFaceSet {\n");
 
     if(!pointDataWritten) {
+
+#if VTK_VERSION_NUMBER >= VTK_VERSION_CHECK(9, 4, 20250513)
+      this->WritePointData(points, normals, tcoords, colors, false, fp);
+#else
       this->WritePointData(points, normals, tcoords, colors, fp);
+#endif
+
       pointDataWritten = 1;
     } else {
       fprintf(fp, "            coord  USE VTKcoordinates\n");
@@ -238,7 +250,12 @@ TTKWRLEXPORTER_EXPORT void vtkVRMLExporter::WriteAnActor(vtkActor *anActor,
     fprintf(fp, "          geometry IndexedLineSet {\n");
 
     if(!pointDataWritten) {
+
+#if VTK_VERSION_NUMBER >= VTK_VERSION_CHECK(9, 4, 20250513)
+      this->WritePointData(points, nullptr, nullptr, colors, false, fp);
+#else
       this->WritePointData(points, nullptr, nullptr, colors, fp);
+#endif
     } else {
       fprintf(fp, "            coord  USE VTKcoordinates\n");
 
@@ -440,6 +457,9 @@ TTKWRLEXPORTER_EXPORT void
                                   vtkDataArray *normals,
                                   vtkDataArray *tcoords,
                                   vtkUnsignedCharArray *colors,
+#if VTK_VERSION_NUMBER >= VTK_VERSION_CHECK(9, 4, 20250513)
+                                  bool vtkNotUsed(cellData),
+#endif
                                   FILE *fp) {
 
   double *p;

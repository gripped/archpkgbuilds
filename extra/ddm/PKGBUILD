# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Contributor: zccrs <zhangjide@deepin.org>

pkgname=ddm
pkgver=0.1.11
pkgrel=1
pkgdesc='New Display Manager for DDE'
arch=('x86_64')
url="https://github.com/linuxdeepin/ddm"
license=('LGPL3')
depends=(bash
         gcc-libs
         glibc
         libxau
         pam
         qt6-base
         qt6-declarative
         systemd-libs
         ttf-font
         xorg-server
         xorg-xauth)
makedepends=(git
             extra-cmake-modules
             python-docutils
             qt6-tools
             ninja)
source=("git+https://github.com/linuxdeepin/ddm.git#tag=$pkgver")
sha512sums=('2b883f1c564d8e0a87552349f0995f3606b4bfeeae1246a0c3e294ca5e949c647d75bb4c77b9bc132bc80819b27ee8a57f922cef3e99cf3a7c5e49bf63acf416')

build() {
  cd ddm
  cmake . -GNinja \
      -DCMAKE_INSTALL_LIBDIR=lib \
      -DCMAKE_INSTALL_LIBEXECDIR=lib \
      -DCMAKE_INSTALL_PREFIX=/usr

  cmake --build .
}

package() {
  cd ddm
  DESTDIR="$pkgdir" ninja install
}

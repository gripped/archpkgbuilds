# Maintainer: Filipe La√≠ns (FFY00) <lains@archlinux.org>
# Contributor: Campbell Jones <arch at serebit dot com>

pkgname=budgie-extras
pkgver=1.9.0
pkgrel=1
pkgdesc='Additional Budgie Desktop components from the Ubuntu Budgie team'
arch=(x86_64)
license=(GPL-3.0-or-later)
url='https://github.com/UbuntuBudgie/budgie-extras'
depends=(
  at-spi2-core
  budgie-desktop
  cairo
  dconf
  gdk-pixbuf2
  glib2
  glibc
  gnome-menus
  granite
  gtk3
  hicolor-icon-theme
  json-glib
  libgee
  libhandy
  libkeybinder3
  libnm
  libnotify
  libpeas
  libsoup3
  libwnck3
  libxfce4windowing
  pango
  python
  python-cairo
  python-cairosvg
  python-dbus
  python-gobject
  python-pillow
  python-psutil
  python-pyudev
  python-svgwrite
  python-xlib
  sound-theme-freedesktop
  vorbis-tools
  wmctrl
  xdotool
  xorg-xinput
  xorg-xprop
  xprintidle
  zenity
)
makedepends=(
  appstream
  git
  intltool
  meson
  ninja
  vala
)
source=(
  "git+$url.git#tag=v$pkgver"
  git+https://github.com/UbuntuBudgie/applications-menu.git
  git+https://github.com/UbuntuBudgie/QuickChar.git
  git+https://github.com/UbuntuBudgie/budgie-network-applet.git
  git+https://github.com/UbuntuBudgie/budgie-trash-applet.git
)
b2sums=(
  5cc028c33043addf1ce9dccbc180639b0bedc3b99e93525a2f3d38031ac85415332d0fa32e8626ee2dda2eaf39948d6a4a2cc8f34816f3bc80973e7a9afeee2f
  SKIP
  SKIP
  SKIP
  SKIP
)

prepare() {
  cd "$pkgname"

  git submodule init
  git config submodule.budgie-applications-menu/applications-menu.url ../applications-menu
  git config submodule.budgie-quickchar/quickchar.url ../QuickChar
  git config submodule.budgie-network-manager/budgie-network-applet.url ../budgie-network-applet
  git config submodule.budgie-trash/trash.url ../budgie-trash-applet
  git -c protocol.file.allow=always submodule update
}

build() {
  arch-meson "$pkgname" build \
    -D b_pie=false
  meson compile -C build
}

package() {
  meson install -C build --destdir "$pkgdir"
}

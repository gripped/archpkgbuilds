# Maintainer: Antonio Rojas <arojas@archlinux.org>

pkgname=rankwidth
pkgver=0.9
pkgrel=4
pkgdesc='A program that calculates rank-width and rank-decompositions'
arch=(x86_64)
url='https://sourceforge.net/projects/rankwidth/'
license=(GPL-2.0-or-later)
depends=(igraph
         glibc)
makedepends=()
source=(https://master.dl.sourceforge.net/project/rankwidth/rw-$pkgver.tar.gz
        igraph-0.10.patch
        igraph-1.0.patch)
sha256sums=('c1e03506fe25cdfcb428c051fc56b2d2affb5b06fba3f2ce756631466befb441'
            '1eee3993779b4ed60d9069652c03e6ec90738e9e8ee1ed8e0916d513c97746fb'
            '0dddbd2fc40a6fd16304d96171df689cd7f35951336156cee717b47eed0f0c2b')

prepare() {
  patch -d rw-$pkgver -p1 < igraph-0.10.patch # Fix build with igraph 0.10
  patch -d rw-$pkgver -p1 < igraph-1.0.patch # Fix build with igraph 1.0
}

build() {
  cd rw-$pkgver
  ./configure --prefix=/usr
  make
}

package() {
  cd rw-$pkgver
  make install DESTDIR="$pkgdir"
}

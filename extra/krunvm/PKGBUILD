# Maintainer: Sven-Hendrik Haase <svenstaro@archlinux.org>
# Contributor: hexchain <arch at hexchain.org>
pkgname=krunvm
pkgver=0.2.6
pkgrel=1
pkgdesc="Create microVMs from OCI images"
url='https://github.com/containers/krunvm'
arch=('x86_64')
license=('Apache-2.0')
makedepends=('cargo' 'asciidoctor')
depends=('glibc' 'gcc-libs' 'libkrun' 'buildah')
source=("https://github.com/containers/krunvm/archive/refs/tags/v$pkgver/$pkgname-$pkgver.tar.gz")
sha256sums=('9f13e938a10565cdd0d38bd49f8c7fc5be57245740bad2bb138eec8675d4ee3b')

build() {
    cd "$pkgname-$pkgver"

    make
}

package() {
    cd "$pkgname-$pkgver"

    make DESTDIR="$pkgdir" PREFIX=/usr install
    install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}
